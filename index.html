<!DOCTYPE html>
<html>
<head>
	<title>Lagged Alliance</title>
	<link rel="stylesheet" type="text/css" href="style/index.css">


	<script type="text/javascript" src="lib/three.js"></script>
	<script type="text/javascript" src="lib/stats.js"></script>

	<script type="text/javascript" src="js/utils/deferred.js"></script>
	<script type="text/javascript" src="js/utils/utility.js"></script>
	<script type="text/javascript" src="js/utils/texturemanager.js"></script>
	<script type="text/javascript" src="js/utils/gameconstants.js"></script>
	<script type="text/javascript" src="js/utils/position.js"></script>
	<script type="text/javascript" src="js/utils/db.js"></script>


	<script type="text/javascript" src="js/gameobjects/gameobject.js"></script>
	<script type="text/javascript" src="js/gameobjects/tree.js"></script>

	<script type="text/javascript" src="js/world/field.js"></script>
	<script type="text/javascript" src="js/world/pathnode.js"></script>
	<script type="text/javascript" src="js/world/gameworld.js"></script>
	<script type="text/javascript" src="js/world/gamemap.js"></script>


	<script type="text/javascript" src="js/ui/actionbar.js"></script>



	
	<script type="text/javascript" src="js/player/inputhandler.js"></script>
	<script type="text/javascript" src="js/player/playeractor.js"></script>
	<script type="text/javascript" src="js/player/healthbar.js"></script>
	<script type="text/javascript" src="js/player/playercontroller.js"></script>
	<script type="text/javascript" src="js/player/aicontroller.js"></script>
	
	<script type="text/javascript" src="js/game.js"></script>


	<script type="x-shader/x-fragment" id="fShader">


			// by David Hoskins.

			// -----------------------------------------------------------------------
			// Water turbulence effect by joltz0r 2013-07-04, improved 2013-07-07
			// -----------------------------------------------------------------------

			#define TAU 6.28318530718
			#define MAX_ITER 5

			uniform float iGlobalTime;
			uniform vec2 iResolution;

			varying vec2 vUv;

			void main( void ) 
			{
				float time = iGlobalTime * .5+23.0;
			    // uv should be the 0-1 uv of texture... gl_FragCoord.xy
				vec2 uv =  vUv;
			    vec2 p = mod(uv*TAU, TAU)-250.0;

				vec2 i = vec2(p);
				float c = 1.0;
				float inten = .005;


				for (int n = 0; n < MAX_ITER; n++) 
				{
					float t = time * (1.0 - (3.5 / float(n+1)));
					i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));
					c += 1.0/length(vec2(p.x / (sin(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));
				}
				c /= float(MAX_ITER);
				c = 1.17-pow(c, 1.4);
				vec3 colour = vec3(pow(abs(c), 8.0));
			    colour = clamp(colour + vec3(0.1, 0.25, 0.4), 0.0, 1.0);
			    
				gl_FragColor = vec4(colour, 1.0);
			}


	</script>




	<script type="x-shader/x-fragment" id="vShader">
			/**
			 * Multiply each vertex by the
			 * model-view matrix and the
			 * projection matrix (both provided
			 * by Three.js) to get a final
			 * vertex position
			 */

			varying vec2 vUv;
			attribute vec2 uvv;

			// uniform float amplitude;
			void main() {
				vUv = uvv;
			    gl_Position = projectionMatrix * modelViewMatrix * vec4(position , 1.0);
			}

			
	</script>


	<script type="text/javascript">

		window.onload = function() {
			"use strict";



			window.game = new Game();
			window.game.loadGame();


		};
	</script>


</head>


<body>

</body>
</html>